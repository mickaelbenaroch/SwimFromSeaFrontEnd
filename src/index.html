<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SwimFromSea</title>
  <base href="/">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
    <script src="//datamaps.github.io/scripts/datamaps.world.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>
    <script>
    var result;
    var countries = [];
    $.get("https://quiet-basin-91917.herokuapp.com/", function(data, status){
       result = data;
  });
    $.get("https://quiet-basin-91917.herokuapp.com/landlock", function(data, status){
       countries = data;
  });

        setTimeout(() => {
      var bubble_map = new Datamap({
              element: document.getElementById("mapcontainer"),
              geographyConfig: {
                popupOnHover: false,
                highlightOnHover: false,
              },
              fills: {
                GOOD: "green",
                MEDIUM: "orange",
                BAD: "red",
                SEASHORE: "#e377c2",  //with no sea shore country 
                defaultFill: '#EDDC4E' //with sea shore
              },
                data: [
                  "'" + countries[0] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[1] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[2] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[4] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[5] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[6] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[7] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[8] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[9] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[10] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[11] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[12] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[13] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[14] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[15] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[16] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[17] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[18] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[19] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[20] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[21] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[22] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[23] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[24] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[25] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[26] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[27] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[28] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[29] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[30] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[31] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[32] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[33] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[34] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[35] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[36] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[37] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[38] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[39] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[40] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[41] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[42] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[43] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[44] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[45] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[46] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[47] + "'" : {fillKey: 'SEASHORE'},
                  "'" + countries[48] + "'" : {fillKey: 'SEASHORE'},

                ],
              responsive: true
            });
            bubble_map.bubbles(result
            , 
    {
              popupTemplate: function(geo, data) {
                //return '<div class="hoverinfo">Medals:' + data.medals + ' Swimming: ' + data.swimming + ' rowing: '  + data.rowing + ''
              return ['<div class="hoverinfo"><strong>',
                        ' Country: ' + data.name +',',
                        ' <br/>Number of Medals: ' + data.medals +',',
                        ' <br/>Swimming: ' + data.swimming +',',
                        ' <br/>Rowing: ' + data.rowing +',',
                        ' <br/>Sailing: ' + data.sailing +',',
                        ' <br/>WaterPolo: ' + data.waterPolo +',',
                        ' <br/>Diving: ' + data.diving +',',
                        ' <br/>BeachVolleyball: ' + data.beachVolleyball +',',
                        ' <br/>Other: ' + data.other +',',
                        '</strong></div>'].join('');
              }
            });
    }, 20500);
    </script>
</body>
</html>
